<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ê°ì •ê±°ìš¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
            background-color: #FFF5F7; /* ì—°í•œ í•‘í¬ ë°°ê²½ */
            background-image: radial-gradient(#FFD1DC 2px, transparent 2px);
            background-size: 30px 30px;
        }
        
        .mirror-frame {
            background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%);
            box-shadow: 0 10px 25px rgba(255, 154, 158, 0.5);
            border: 8px solid white;
        }

        .scan-line {
            position: absolute;
            width: 100%;
            height: 4px;
            background: #00FFFF;
            box-shadow: 0 0 10px #00FFFF;
            top: 0;
            left: 0;
            animation: scan 2s linear infinite;
            display: none;
            z-index: 10;
        }

        @keyframes scan {
            0% { top: 0; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        .emotion-card {
            transition: transform 0.3s ease;
        }
        .emotion-card:hover {
            transform: scale(1.05);
        }

        /* ìº”ë²„ìŠ¤ ì¢Œìš° ë°˜ì „ (ê±°ìš¸ íš¨ê³¼) */
        video {
            transform: scaleX(-1); 
        }

        .btn-press {
            transition: all 0.1s;
        }
        .btn-press:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="max-w-md w-full bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-pink-200">
        
        <!-- í—¤ë” -->
        <div class="bg-pink-100 p-6 text-center">
            <h1 class="text-3xl text-pink-500 mb-2">âœ¨ AI ê°ì •ê±°ìš¸ âœ¨</h1>
            <p class="text-gray-500 text-sm">ê±°ìš¸ì•„ ê±°ìš¸ì•„, ë‚´ ê¸°ë¶„ì€ ì–´ë•Œ?</p>
        </div>

        <!-- ê±°ìš¸ (ì¹´ë©”ë¼) ì˜ì—­ -->
        <div class="p-6 flex flex-col items-center">
            <div class="relative w-64 h-64 rounded-full overflow-hidden mirror-frame mb-6 relative">
                <!-- ë¹„ë””ì˜¤ ìš”ì†Œ -->
                <video id="webcam" autoplay playsinline class="w-full h-full object-cover"></video>
                
                <!-- ì¹´ë©”ë¼ê°€ ì—†ì„ ë•Œ ë³´ì—¬ì¤„ ëŒ€ì²´ ì´ë¯¸ì§€ -->
                <div id="no-camera" class="absolute inset-0 bg-gray-200 flex flex-col items-center justify-center hidden">
                    <span class="text-4xl">ğŸ“·</span>
                    <p class="text-gray-500 mt-2 text-sm">ì¹´ë©”ë¼ë¥¼ ì¼œì£¼ì„¸ìš”!</p>
                </div>

                <!-- ìŠ¤ìº” íš¨ê³¼ -->
                <div id="scan-effect" class="scan-line"></div>
            </div>

            <!-- ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
            <button id="analyze-btn" class="btn-press w-full bg-gradient-to-r from-pink-400 to-purple-400 text-white text-xl py-4 rounded-2xl shadow-lg hover:from-pink-500 hover:to-purple-500 focus:outline-none flex items-center justify-center gap-2">
                <span>ğŸ”</span> ê¸°ë¶„ ë¶„ì„í•˜ê¸°
            </button>
        </div>

        <!-- ê²°ê³¼ ì˜ì—­ (ì²˜ìŒì—ëŠ” ìˆ¨ê¹€) -->
        <div id="result-area" class="hidden px-6 pb-8 text-center animate-fade-in">
            <div class="bg-blue-50 rounded-2xl p-4 border-2 border-blue-100">
                <div class="text-5xl mb-3" id="emotion-emoji">ğŸ¤”</div>
                <h2 class="text-2xl text-blue-600 mb-2" id="emotion-title">ë¶„ì„ ì¤‘...</h2>
                <p class="text-gray-600 break-keep" id="emotion-desc">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
            </div>
            
            <div class="mt-4 bg-yellow-50 rounded-xl p-3 border-2 border-yellow-100">
                <span class="text-yellow-600 font-bold">ğŸ’¡ ì¶”ì²œ í™œë™:</span>
                <span id="recommend-action" class="text-gray-700">ì‹¬í˜¸í¡ í•œë²ˆ í•˜ê¸°</span>
            </div>

            <button onclick="resetMirror()" class="mt-4 text-gray-400 underline text-sm hover:text-gray-600">ë‹¤ì‹œ í•˜ê¸°</button>
        </div>

    </div>

    <!-- í‘¸í„° -->
    <div class="mt-8 text-center text-gray-400 text-sm">
        <p>ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ì„œë¡œì˜ í‘œì •ì„ ì‚´í´ë³´ì„¸ìš”!</p>
    </div>

    <script>
        const video = document.getElementById('webcam');
        const noCamera = document.getElementById('no-camera');
        const analyzeBtn = document.getElementById('analyze-btn');
        const scanEffect = document.getElementById('scan-effect');
        const resultArea = document.getElementById('result-area');
        
        const emotionEmoji = document.getElementById('emotion-emoji');
        const emotionTitle = document.getElementById('emotion-title');
        const emotionDesc = document.getElementById('emotion-desc');
        const recommendAction = document.getElementById('recommend-action');

        // ê°ì • ë°ì´í„°ë² ì´ìŠ¤ (ì•„ì´ë“¤ì„ ìœ„í•œ ê¸ì •ì ì´ê³  ì¬ë¯¸ìˆëŠ” ê²°ê³¼)
        const emotions = [
            {
                emoji: "ğŸ¥°",
                title: "ì‚¬ë‘ìŠ¤ëŸ¬ì›€ 100%",
                desc: "ì˜¤ëŠ˜ë”°ë¼ ë§ˆìŒì´ ë”°ëœ»í•´ ë³´ì´ë„¤ìš”! ì¹œêµ¬ë“¤ì—ê²Œ ì¹œì ˆì„ ë² í’€ ì¤€ë¹„ê°€ ë˜ì—ˆêµ°ìš”.",
                action: "ì¹œí•œ ì¹œêµ¬ì—ê²Œ 'ì•ˆë…•!'í•˜ê³  ë°ê²Œ ì¸ì‚¬í•´ë³´ê¸°"
            },
            {
                emoji: "ğŸ¤©",
                title: "ë°˜ì§ë°˜ì§ í˜¸ê¸°ì‹¬",
                desc: "ëˆˆì´ ì´ˆë¡±ì´ˆë¡± ë¹›ë‚˜ê³  ìˆì–´ìš”! ë¬´ì–¸ê°€ ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš¸ ì¤€ë¹„ê°€ ì™„ë²½í•´ìš”.",
                action: "ì„ ìƒë‹˜ ë§ì”€ì— ê·€ ê¸°ìš¸ì—¬ ë³´ê¸°"
            },
            {
                emoji: "ğŸ˜",
                title: "ìì‹ ê° ë¿œë¿œ",
                desc: "ì–´ê¹¨ê°€ ì«™ í´ì ¸ ìˆë„¤ìš”! ì˜¤ëŠ˜ì€ ì–´ë–¤ ì–´ë ¤ìš´ ë¬¸ì œë„ ì²™ì²™ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ìš”.",
                action: "ë°œí‘œ ì‹œê°„ì— ì† ë²ˆì© ë“¤ê¸°"
            },
            {
                emoji: "ğŸ˜Œ",
                title: "í‰í™”ë¡œìš´ ë§ˆìŒ",
                desc: "í‘œì •ì´ ì•„ì£¼ í¸ì•ˆí•´ ë³´ì—¬ìš”. ìˆ²ì†ì˜ ë‚˜ë¬´ì²˜ëŸ¼ ì°¨ë¶„í•˜ê³  ë“¬ì§í•˜ë„¤ìš”.",
                action: "ì°½ë°–ì˜ êµ¬ë¦„ í•œë²ˆ ì³ë‹¤ë³´ê¸°"
            },
            {
                emoji: "ğŸ˜œ",
                title: "ì¥ë‚œê¾¸ëŸ¬ê¸° ì—ë„ˆì§€",
                desc: "ì¬ë¯¸ìˆëŠ” ìƒê°ì´ ê°€ë“ ì°¨ ìˆêµ°ìš”! ì¦ê±°ìš´ ì—ë„ˆì§€ë¡œ ì£¼ë³€ì„ ì›ƒê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.",
                action: "ì¹œêµ¬ì—ê²Œ ì¬ë¯¸ìˆëŠ” ì´ì•¼ê¸° í•´ì£¼ê¸°"
            },
            {
                emoji: "ğŸ”¥",
                title: "ì—´ì • ê°€ë“",
                desc: "ì˜¤ëŠ˜ í•˜ë£¨ë„ ì—´ì‹¬íˆ í•  ì¤€ë¹„ê°€ ë˜ì—ˆêµ°ìš”! ì—ë„ˆì§€ê°€ ë„˜ì³ í˜ëŸ¬ìš”.",
                action: "ìš´ë™ì¥ì—ì„œ ì‹ ë‚˜ê²Œ ë›°ì–´ë†€ê¸°"
            }
        ];

        // 1. ì›¹ìº  ì‹œì‘ í•¨ìˆ˜
        async function startWebcam() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;
            } catch (err) {
                console.error("ì¹´ë©”ë¼ ì ‘ê·¼ ì‹¤íŒ¨:", err);
                video.style.display = 'none';
                noCamera.classList.remove('hidden');
                noCamera.style.display = 'flex';
            }
        }

        // 2. ë¶„ì„ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        analyzeBtn.addEventListener('click', () => {
            // ë²„íŠ¼ ë¹„í™œì„±í™”
            analyzeBtn.disabled = true;
            analyzeBtn.classList.add('opacity-50', 'cursor-not-allowed');
            analyzeBtn.innerHTML = '<span>â³</span> ë¶„ì„ ì¤‘...';
            
            // ê²°ê³¼ì°½ ìˆ¨ê¸°ê¸°
            resultArea.classList.add('hidden');

            // ìŠ¤ìº” íš¨ê³¼ ì‹œì‘
            scanEffect.style.display = 'block';

            // 2.5ì´ˆ í›„ ê²°ê³¼ ë³´ì—¬ì£¼ê¸° (ë¶„ì„í•˜ëŠ” ì²™ ì—°ì¶œ)
            setTimeout(() => {
                showRandomResult();
                scanEffect.style.display = 'none';
                analyzeBtn.innerHTML = '<span>ğŸ”</span> ë‹¤ì‹œ ë¶„ì„í•˜ê¸°';
                analyzeBtn.disabled = false;
                analyzeBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }, 2500);
        });

        // 3. ëœë¤ ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function showRandomResult() {
            const randomEmotion = emotions[Math.floor(Math.random() * emotions.length)];
            
            emotionEmoji.innerText = randomEmotion.emoji;
            emotionTitle.innerText = randomEmotion.title;
            emotionDesc.innerText = randomEmotion.desc;
            recommendAction.innerText = randomEmotion.action;

            resultArea.classList.remove('hidden');
            
            // ìŠ¤í¬ë¡¤ì„ ê²°ê³¼ì°½ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ì´ë™
            resultArea.scrollIntoView({ behavior: 'smooth' });
        }

        // 4. ì´ˆê¸°í™” í•¨ìˆ˜
        function resetMirror() {
            resultArea.classList.add('hidden');
            analyzeBtn.innerHTML = '<span>ğŸ”</span> ê¸°ë¶„ ë¶„ì„í•˜ê¸°';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ì•± ì‹œì‘ ì‹œ ì¹´ë©”ë¼ ì¼œê¸°
        startWebcam();

    </script>
</body>
</html>
